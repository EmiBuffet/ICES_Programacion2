<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EjemploXSS</title>
</head>
<body>
    <label>Input Vulnerable con XSS</label>
    <input id="inputVulnerable" onchange="funcionAceptar()"></input>

    <button onclick="funcionAceptar()">Aceptar</button>

    <br><br>
    <div id="div"></div>
    <script>
        function funcionAceptar(){
            //Ejemplo <img src='x' onerror='alert(1)'>
            let inputUsuario = document.querySelector("#inputVulnerable").value;
            
            document.querySelector("#div").innerHTML = inputUsuario;
            
            // Utilizar textContent para insertar texto de manera segura
            // Usar textContent o innerText 
            //document.getElementById('comments').textContent = inputUsuario;

            // Solucion Manual: Funci√≥n para escapar caracteres especiales en HTML
            /*
            function escapeHtml(unsafe) {
                return unsafe
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"/g, "&quot;")
                    .replace(/'/g, "&#039;");
            }

            // Escapar el input del usuario antes de insertarlo en el HTML
            document.getElementById('comments').innerHTML = escapeHtml(userInput);
            */
        }
    </script>
</body>
</html>